import{j as e}from"./query-vendor-CVtgHnZ_.js";import{l as a,m as r,O as s,n as t,o,p as n}from"./radix-vendor-hfgbE2XR.js";import{a as l}from"./index-DKQd0WCU.js";import{r as i}from"./react-vendor-31zzwpBM.js";import{u as m,F as c,I as d,T as u}from"./Textarea-C6yzHASN.js";import{B as x}from"./useToast-D9XOOVtq.js";import"./utils-vendor-B_WdigmM.js";function p({post:p,isOpen:h,onClose:j,onSubmit:b}){const{register:v,handleSubmit:g,formState:{errors:f},reset:y,setValue:q}=m({defaultValues:{title:"",content:"",name:"",avatar:""}});i.useEffect(()=>{p?(q("title",p.title),q("content",p.content),q("name",p.name),q("avatar",p.avatar)):y()},[p,h,q,y]);const C=!!p;return e.jsx(a,{open:h,onOpenChange:j,children:e.jsxs(r,{children:[e.jsx(s,{className:"fixed inset-0 bg-black/50 z-40"}),e.jsxs(t,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100%-2rem)] sm:w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl z-50 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(o,{className:"text-2xl font-bold text-gray-900",children:C?"Editar Post":"Crear Nuevo Post"}),e.jsx(n,{asChild:!0,children:e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Cerrar",children:e.jsx(l,{className:"w-5 h-5 text-gray-600"})})})]}),e.jsxs("form",{onSubmit:g(e=>{b({title:e.title,content:e.content,name:e.name,avatar:e.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.name||"user"}`}),y()}),className:"space-y-4",noValidate:!0,children:[e.jsx(c,{label:"Nombre",error:f.name?.message,required:!0,children:e.jsx(d,{...v("name",{required:"El nombre es requerido",minLength:{value:2,message:"El nombre debe tener al menos 2 caracteres"}}),placeholder:"Tu nombre",error:!!f.name})}),e.jsx(c,{label:"Avatar URL (opcional)",error:f.avatar?.message,children:e.jsx(d,{...v("avatar",{pattern:{value:/^https?:\/\/.+/,message:"Debe ser una URL válida"}}),type:"url",placeholder:"https://ejemplo.com/avatar.jpg",error:!!f.avatar})}),e.jsx(c,{label:"Título",error:f.title?.message,required:!0,children:e.jsx(d,{...v("title",{required:"El título es requerido",minLength:{value:3,message:"El título debe tener al menos 3 caracteres"}}),placeholder:"Título del post",error:!!f.title})}),e.jsx(c,{label:"Contenido",error:f.content?.message,required:!0,children:e.jsx(u,{...v("content",{required:"El contenido es requerido",minLength:{value:10,message:"El contenido debe tener al menos 10 caracteres"}}),rows:6,placeholder:"Escribe tu post aquí...",error:!!f.content})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(n,{asChild:!0,children:e.jsx(x,{variant:"secondary",type:"button",children:"Cancelar"})}),e.jsx(x,{type:"submit",children:C?"Guardar Cambios":"Crear Post"})]})]})]})]})})}export{p as PostForm};
