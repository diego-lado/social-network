import{j as e}from"./query-vendor-CVtgHnZ_.js";import{i as t,T as s,j as n,C as r,S as o,k as a}from"./radix-vendor-hfgbE2XR.js";import{D as i,T as c}from"./index-DKQd0WCU.js";import{f as d}from"./utils-vendor-B_WdigmM.js";import{L as l,r as m}from"./react-vendor-31zzwpBM.js";const h="https://665de6d7e88051d60408c32d.mockapi.io",f={getPosts:async(e=1,t=10,s="newest")=>{const n="newest"===s?"desc":"asc",r=await fetch(`${h}/post?page=${e}&limit=${t}&sortBy=createdAt&order=${n}`);if(!r.ok)throw new Error("Failed to fetch posts");return r.json()},getSinglePost:async e=>{const t=await fetch(`${h}/post/${e}`);if(!t.ok)throw new Error("Failed to fetch post");return t.json()},createPost:async e=>{const t=await fetch(`${h}/post`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create post");return t.json()},updatePost:async(e,t)=>{const s=await fetch(`${h}/post/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to update post");return s.json()},deletePost:async e=>{const t=await fetch(`${h}/post/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete post");return t.json()},getComments:async e=>{const t=await fetch(`${h}/post/${e}/comment`);if(!t.ok)throw new Error("Failed to fetch comments");return t.json()},createComment:async(e,t)=>{const s=await fetch(`${h}/post/${e}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to create comment");return s.json()},updateComment:async(e,t,s)=>{const n=await fetch(`${h}/post/${e}/comment/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to update comment");return n.json()},deleteComment:async(e,t)=>{const s=await fetch(`${h}/post/${e}/comment/${t}`,{method:"DELETE"});if(!s.ok)throw new Error("Failed to delete comment");return s.json()},deleteCommentRecursive:async(e,t)=>{try{const n=await f.getComments(e);if(!n||0===n.length)return;const r=new Map;n.forEach(e=>{if(e.parentId){const t=r.get(e.parentId)||[];t.push(e),r.set(e.parentId,t)}});const o=new Set([t]),a=[t];for(;a.length>0;){const e=a.shift();(r.get(e)||[]).forEach(e=>{o.has(e.id)||(o.add(e.id),a.push(e.id))})}const i=n.filter(e=>o.has(e.id));for(const t of i)try{await f.deleteComment(e,t.id)}catch(s){}}catch(s){throw s}},deleteAllComments:async e=>{try{const s=await f.getComments(e);if(!s||0===s.length)return;for(const n of s)try{await f.deleteComment(e,n.id)}catch(t){}}catch(t){}}};function p({items:c,ariaLabel:d,className:l=""}){return 0===c.length?null:e.jsxs(t,{children:[e.jsx(s,{asChild:!0,children:e.jsx("button",{className:`p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 flex-shrink-0 cursor-pointer ${l}`,"aria-label":d,children:e.jsx(i,{className:"w-5 h-5 text-gray-600"})})}),e.jsx(n,{children:e.jsx(r,{className:"min-w-[180px] bg-white rounded-lg shadow-lg border border-gray-200 p-1 z-50",align:"end",children:c.map((t,s)=>e.jsxs("div",{children:[s>0&&e.jsx(o,{className:"h-px bg-gray-200 my-1"}),e.jsx(a,{className:"px-3 py-2 text-sm rounded-md cursor-pointer focus:outline-none "+("danger"===t.variant?"text-red-600 hover:bg-red-50 focus:bg-red-50":"text-gray-700 hover:bg-gray-100 focus:bg-gray-100"),onSelect:t.onClick,children:t.label})]},s))})})]})}function u(e){try{const t=new Date(e);return d(t,{addSuffix:!0})}catch{return"Fecha desconocida"}}function x({message:t="Cargando..."}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 flex flex-col items-center gap-4 min-w-[200px]",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600"}),e.jsx("p",{className:"text-gray-700 font-medium",children:t})]})})}function y({message:t="Cargando..."}){return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:t})]})})}function g({message:t,action:s}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:t}),s]})}function w({variant:t="primary",size:s="default",leftIcon:n,rightIcon:r,fullWidth:o=!1,className:a="",children:i,as:c,...d}){const m=["btn",{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger"}[t],{default:"",small:"text-sm py-1.5 px-3"}[s],o?"w-full":"",(n||r)&&"default"===s?"flex items-center justify-center gap-2":"",a].filter(Boolean).join(" ");if("link"===c){const{to:t,...s}=d;return e.jsxs(l,{to:t,className:m,...s,children:[n&&e.jsx("span",{className:"flex-shrink-0",children:n}),i,r&&e.jsx("span",{className:"flex-shrink-0",children:r})]})}return e.jsxs("button",{type:"button",className:m,...d,children:[n&&e.jsx("span",{className:"flex-shrink-0",children:n}),i,r&&e.jsx("span",{className:"flex-shrink-0",children:r})]})}const j=()=>{const e=m.useContext(c);if(void 0===e)throw new Error("useToast must be used within a ToastProvider");return e};export{w as B,g as E,y as L,p as O,x as a,f as b,u as f,j as u};
